{"version":3,"file":"SelectInput.stories-177720a2.js","sources":["../../src/components/icons/ArrowDownIcon.tsx","../../src/components/SelectInput/index.tsx"],"sourcesContent":["import { SVGAttributes } from \"react\";\n\nconst ArrowDownIcon = (props: SVGAttributes<SVGSVGElement>) => {\n  return (\n    <svg\n      width=\"1em\"\n      height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      strokeWidth=\"2\"\n      {...props}\n    >\n      <polyline points=\"5 8.5 12 15.5 19 8.5\" />\n    </svg>\n  );\n};\n\nexport default ArrowDownIcon;\n","import {\n  ComponentProps,\n  MouseEvent,\n  ReactNode,\n  useEffect,\n  useRef,\n} from \"react\";\nimport { cx } from \"class-variance-authority\";\nimport ArrowDownIcon from \"../icons/ArrowDownIcon\";\n\nconst UP_KEY = \"ArrowUp\";\nconst DOWN_KEY = \"ArrowDown\";\n\nexport interface SelectOption {\n  value: string | number;\n  label?: string;\n}\n\nexport interface SelectInputProps\n  extends Omit<ComponentProps<\"input\">, \"onChange\"> {\n  /** The label for the input. */\n  label?: ReactNode;\n  /** The helper text for the input. */\n  helperText?: ReactNode;\n  /** The icon for the input. */\n  options?: SelectOption[];\n  /** The callback for when the input changes. */\n  onChange?: (value: string | number) => void;\n  // TODO: disabled, error, fullWidth\n}\n\nexport default function SelectInput({\n  label,\n  helperText,\n  options = [],\n  id,\n  name,\n  className,\n  onChange,\n  ...props\n}: SelectInputProps) {\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  // Handle keyboard navigation between options within up and down arrow keys.\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!menuRef.current) return;\n      if (e.key !== UP_KEY && e.key !== DOWN_KEY) return;\n      const optionElements = menuRef.current.querySelectorAll(\"button\");\n      let focusedIndex: number | null = null;\n      for (let index = 0; index < optionElements.length; index++) {\n        const optionElement = optionElements[index];\n        if (optionElement === document.activeElement) {\n          focusedIndex = index;\n          break;\n        }\n      }\n      if (focusedIndex === null) return;\n      if (e.key === DOWN_KEY) {\n        optionElements[focusedIndex + 1]?.focus();\n      }\n      if (e.key === UP_KEY) {\n        optionElements[focusedIndex - 1]?.focus();\n      }\n    };\n    document.addEventListener(\"keydown\", handleKeyDown);\n    return () => document.removeEventListener(\"keydown\", handleKeyDown);\n  }, []);\n\n  const handleClick = (e: MouseEvent<HTMLDivElement>) => {\n    const input = e.currentTarget.querySelector(\"input\");\n    input?.focus();\n  };\n\n  const handleOptionClick = (\n    e: MouseEvent<HTMLButtonElement>,\n    option: SelectOption,\n  ) => {\n    e.preventDefault();\n    e.stopPropagation();\n    onChange?.(option.value);\n  };\n\n  return (\n    <div className={cx(\"group flex w-64 flex-col\", className)}>\n      {label && (\n        <label\n          className=\"px-1 py-1 text-base font-medium text-neutral-100\"\n          htmlFor={id || name}\n        >\n          {label}\n        </label>\n      )}\n      <div\n        className=\"relative flex flex-row items-center gap-3 rounded border-2 border-neutral-800 bg-inherit px-4 py-3 transition-colors group-focus-within:border-neutral-100\"\n        onClick={handleClick}\n      >\n        <input\n          type=\"text\"\n          className=\"w-0 grow bg-transparent focus:outline-none\"\n          id={id || name}\n          name={name}\n          {...props}\n        />\n        <ArrowDownIcon className=\"rotate-0 transition-transform group-focus-within:rotate-180\" />\n        <div\n          className=\"pointer-events-none absolute left-0 top-full z-10 flex w-full translate-y-0 flex-col rounded border-2 border-neutral-100 bg-neutral-950 opacity-0 transition-all group-focus-within:pointer-events-auto group-focus-within:translate-y-2 group-focus-within:opacity-100\"\n          ref={menuRef}\n        >\n          {options.map((option) => (\n            <button\n              key={option.value}\n              className=\"p-2 text-left transition-colors hover:bg-neutral-100/5 focus:bg-neutral-100/5 focus:outline-none\"\n              onClick={(e) => handleOptionClick(e, option)}\n            >\n              {String(option.value) || option.label}\n            </button>\n          ))}\n        </div>\n      </div>\n      {helperText && (\n        <label\n          className=\"px-4 py-1 text-base font-medium text-neutral-400\"\n          htmlFor={id || name}\n        >\n          {helperText}\n        </label>\n      )}\n    </div>\n  );\n}\n"],"names":["ArrowDownIcon","props","jsx","UP_KEY","DOWN_KEY","SelectInput","label","helperText","options","id","name","className","onChange","menuRef","useRef","useEffect","handleKeyDown","e","optionElements","focusedIndex","index","_a","_b","handleClick","input","handleOptionClick","option","jsxs","cx"],"mappings":"qIAEA,MAAAA,EAAAC,GACEC,EAAA,IACE,MAAC,CAAA,MAAA,MACO,OAAA,MACC,QAAA,YACC,KAAA,OACH,OAAA,eACE,cAAA,QACO,eAAA,QACC,YAAA,IACH,GAAAD,EACR,SAAAC,EAAAA,IAAA,WAAA,CAAA,OAAA,sBAAA,CAAA,CAEoC,CAAA,gHCL9C,MAAAC,EAAA,UACAC,EAAA,YAoBA,SAAAC,EAAA,CAAoC,MAAAC,EAClC,WAAAC,EACA,QAAAC,EAAA,CAAA,EACW,GAAAC,EACX,KAAAC,EACA,UAAAC,EACA,SAAAC,EACA,GAAAX,CAEF,EAAA,CACE,MAAAY,EAAAC,SAAA,IAAA,EAGAC,EAAAA,UAAA,IAAA,CACE,MAAAC,EAAAC,GAAA,SAEE,GADA,CAAAJ,EAAA,SACAI,EAAA,MAAAd,GAAAc,EAAA,MAAAb,EAA4C,OAC5C,MAAAc,EAAAL,EAAA,QAAA,iBAAA,QAAA,EACA,IAAAM,EAAA,KACA,QAAAC,EAAA,EAAAA,EAAAF,EAAA,OAAAE,IAEE,GADAF,EAAAE,CAAA,IACA,SAAA,cAAA,CACED,EAAAC,EACA,KAAA,CAGJD,IAAA,OACAF,EAAA,MAAAb,KACEiB,EAAAH,EAAAC,EAAA,CAAA,IAAA,MAAAE,EAAA,SAEFJ,EAAA,MAAAd,KACEmB,EAAAJ,EAAAC,EAAA,CAAA,IAAA,MAAAG,EAAA,SACF,EAEF,gBAAA,iBAAA,UAAAN,CAAA,EACA,IAAA,SAAA,oBAAA,UAAAA,CAAA,CAAkE,EAAA,CAAA,CAAA,EAGpE,MAAAO,EAAA,GAAA,CACE,MAAAC,EAAA,EAAA,cAAA,cAAA,OAAA,EACAA,GAAA,MAAAA,EAAA,OAAa,EAGfC,EAAA,CAAA,EAAAC,IAAA,CAIE,EAAA,eAAA,EACA,EAAA,gBAAA,EACAd,GAAA,MAAAA,EAAAc,EAAA,MAAuB,EAGzB,OAAAC,EAAA,KAAA,MAAA,CAAA,UAAAC,EAAA,2BAAAjB,CAAA,EAAA,SAAA,CAEKL,GAAAJ,EAAA,IACC,QAAC,CAAA,UAAA,mDACW,QAAAO,GAAAC,EACK,SAAAJ,CAEd,CAAA,EACHqB,EAAA,KAEF,MAAC,CAAA,UAAA,6JACW,QAAAJ,EACD,SAAA,CAETrB,EAAA,IAAA,QAAC,CAAA,KAAA,OACM,UAAA,6CACK,GAAAO,GAAAC,EACA,KAAAA,EACV,GAAAT,CACI,CAAA,EACNC,EAAAA,IAAAF,EAAA,CAAA,UAAA,6DAAA,CAAA,EACuFE,EAAA,IACvF,MAAC,CAAA,UAAA,0QACW,IAAAW,EACL,SAAAL,EAAA,IAAAkB,GAAAxB,EAAA,IAGH,SAAC,CAAA,UAAA,mGAEW,QAAAe,GAAAQ,EAAAR,EAAAS,CAAA,EACiC,SAAA,OAAAA,EAAA,KAAA,GAAAA,EAAA,KAEX,EAAAA,EAAA,KAJpB,CAAA,CAMf,CAAA,CACH,CAAA,CAAA,EACFnB,GAAAL,EAAA,IAEE,QAAC,CAAA,UAAA,mDACW,QAAAO,GAAAC,EACK,SAAAH,CAEd,CAAA,CACH,CAAA,CAAA,CAIR"}